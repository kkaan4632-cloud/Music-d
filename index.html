<!-- Normal MÃ¼zik -->
<div class="section" id="normalMusic">
  <h2>ğŸ¶ Normal MÃ¼zik</h2>
</div>

<!-- DiÄŸer kategoriler -->
<div class="section" id="phonkMusic">
  <h2>ğŸ”¥ Phonk</h2>
</div>
<div class="section" id="rockMusic">
  <h2>ğŸ¸ Rock</h2>
</div>
<div class="section" id="otherMusic">
  <h2>ğŸ§ DiÄŸer</h2>
</div><!-- Chat -->
<div class="section">
  <h2>ğŸ’¬ Sohbet</h2>
  <div id="chat"></div>
  <input type="text" id="chatInput" placeholder="Mesaj yaz...">
  <button onclick="sendMessage()">GÃ¶nder</button>
</div><!-- Aktif KullanÄ±cÄ±lar -->
<div class="section">
  <h2>ğŸ‘¥ Aktif KullanÄ±cÄ±lar</h2>
  <div id="userList"></div>
</div>

<!-- DM Penceresi -->
<div id="dmPanel" class="section" style="display:none;">
  <h2>ğŸ“© Ã–zel Mesaj</h2>
  <div id="dmChat" style="height:200px; overflow-y:auto; background:#222; padding:8px; border-radius:6px;"></div>
  <input type="text" id="dmInput" placeholder="Mesaj yaz...">
  <button onclick="sendDM()">GÃ¶nder</button>
  <button style="background:red;" onclick="closeDM()">Kapat</button>
</div><!-- Admin GiriÅŸ -->
<div class="section">
  <h2>ğŸ”‘ Admin GiriÅŸi</h2>
  <input type="password" id="adminPass" placeholder="Åifre gir">
  <button onclick="loginAdmin()">GiriÅŸ</button>
</div>

<!-- Owner GiriÅŸi -->
<div class="section">
  <h2>ğŸ‘‘ Owner GiriÅŸi</h2>
  <input type="password" id="ownerPass" placeholder="Owner ÅŸifre gir">
  <button onclick="loginOwner()">GiriÅŸ</button>
</div>

<!-- Admin Panel -->
<div id="adminPanel" style="display:none;" class="section">
  <h2>âš™ï¸ Admin Paneli</h2>
  <input type="text" id="newID" placeholder="Yeni ID ekle (Normal)">
  <button onclick="addID('normal')">Ekle</button>
</div>

<!-- Owner Panel -->
<div id="ownerPanel" style="display:none;" class="section">
  <h2>ğŸ‘‘ Owner Paneli</h2>
  <input type="text" id="newPhonk" placeholder="Phonk ID ekle">
  <button onclick="addID('phonk')">Ekle</button>
  <br>
  <input type="text" id="newRock" placeholder="Rock ID ekle">
  <button onclick="addID('rock')">Ekle</button>
  <br>
  <input type="text" id="newOther" placeholder="DiÄŸer ID ekle">
  <button onclick="addID('other')">Ekle</button>
</div>let isAdmin = false;
let isOwner = false;
let username = "Guest" + Math.floor(Math.random() * 1000);

let currentDM = null;
let dmMessages = {}; // DM iÃ§in

// ID listeleri
let normalIDs = ["114377669273691","134907421285608","104168792634229","74431247827459","130525432946828","99830662289112","118245433375755","105008782996692"];
let phonkIDs = [];
let rockIDs = [];
let otherIDs = [];function renderIDs() {
  renderCategory("normalMusic", "ğŸ¶ Normal MÃ¼zik", normalIDs);
  renderCategory("phonkMusic", "ğŸ”¥ Phonk", phonkIDs);
  renderCategory("rockMusic", "ğŸ¸ Rock", rockIDs);
  renderCategory("otherMusic", "ğŸ§ DiÄŸer", otherIDs);
}

function renderCategory(divId, title, arr) {
  let container = document.getElementById(divId);
  container.innerHTML = `<h2>${title}</h2>`;
  if (arr.length === 0) {
    container.innerHTML += `<p style="text-align:center; color:gray;">ID eklenmedi</p>`;
    return;
  }
  arr.forEach((id, index) => {
    let div = document.createElement("div");
    div.className = "id-item";
    div.innerHTML = `
      ${id}
      <div>
        <button onclick="copyID('${id}')">Kopyala</button>
        ${(isAdmin || isOwner) ? `<button onclick="deleteID('${divId}',${index})">Sil</button>` : ""}
      </div>`;
    container.appendChild(div);
  });
}

function copyID(id) {
  navigator.clipboard.writeText(id);
  alert("ID kopyalandÄ±: " + id);
}

function deleteID(divId, index) {
  if (divId === "normalMusic") normalIDs.splice(index,1);
  if (divId === "phonkMusic") phonkIDs.splice(index,1);
  if (divId === "rockMusic") rockIDs.splice(index,1);
  if (divId === "otherMusic") otherIDs.splice(index,1);
  renderIDs();
}

function addID(type) {
  let input;
  if (type === "normal") input = document.getElementById("newID");
  if (type === "phonk") input = document.getElementById("newPhonk");
  if (type === "rock") input = document.getElementById("newRock");
  if (type === "other") input = document.getElementById("newOther");

  let val = input.value.trim();
  if (!val) return;
  if (type === "normal") normalIDs.push(val);
  if (type === "phonk") phonkIDs.push(val);
  if (type === "rock") rockIDs.push(val);
  if (type === "other") otherIDs.push(val);

  input.value = "";
  renderIDs();
}function sendMessage() {
  let input = document.getElementById("chatInput");
  let msg = input.value.trim();
  if (!msg) return;

  let chat = document.getElementById("chat");
  let div = document.createElement("div");
  div.className = "chat-msg";
  div.innerHTML = `<span class="${isOwner ? 'owner' : (isAdmin ? 'admin' : 'guest')}">
  ${isOwner ? 'OWNER' : (isAdmin ? 'Admin' : username)}:</span> ${msg}
  ${(isAdmin || isOwner) ? `<button onclick="this.parentElement.remove()">Sil</button>` : ""}`;
  chat.appendChild(div);
  chat.scrollTop = chat.scrollHeight;
  input.value = "";
}function updateUserList() {
  let users = localStorage.getItem("activeUsers");
  users = users ? JSON.parse(users) : [];
  users = users.filter(u => Date.now() - u.time < 30000);

  let listDiv = document.getElementById("userList");
  listDiv.innerHTML = "";
  users.forEach(u => {
    let btn = document.createElement("button");
    btn.innerText = u.name;
    btn.style.display = "block";
    btn.style.margin = "5px 0";
    btn.onclick = () => openDM(u.name);
    listDiv.appendChild(btn);
  });
}

function openDM(targetUser) {
  currentDM = targetUser;
  document.getElementById("dmPanel").style.display = "block";
  renderDM();
}

function closeDM() {
  currentDM = null;
  document.getElementById("dmPanel").style.display = "none";
}

function sendDM() {
  if (!currentDM) return;
  let input = document.getElementById("dmInput");
  let msg = input.value.trim();
  if (!msg) return;

  if (!dmMessages[currentDM]) dmMessages[currentDM] = [];
  dmMessages[currentDM].push({ from: username, text: msg });

  input.value = "";
  renderDM();
}

function renderDM() {
  let chat = document.getElementById("dmChat");
  chat.innerHTML = "";
  let messages = dmMessages[currentDM] || [];
  messages.forEach(m => {
    let div = document.createElement("div");
    div.innerHTML = `<b>${m.from}:</b> ${m.text}`;
    chat.appendChild(div);
  });
  chat.scrollTop = chat.scrollHeight;
}function loginAdmin() {
  let pass = document.getElementById("adminPass").value;
  if (pass === "NEONUM31") {
    isAdmin = true;
    alert("Admin giriÅŸi baÅŸarÄ±lÄ±!");
    document.getElementById("adminPanel").style.display = "block";
    renderIDs();
  } else {
    alert("HatalÄ± ÅŸifre!");
  }
}

function loginOwner() {
  let pass = document.getElementById("ownerPass").value;
  if (pass === "OWNERNEON") {
    isOwner = true;
    alert("Owner giriÅŸi baÅŸarÄ±lÄ±!");
    document.getElementById("ownerPanel").style.display = "block";
    document.getElementById("adminPanel").style.display = "block";
    renderIDs();
  } else {
    alert("HatalÄ± ÅŸifre!");
  }
}function updateActiveUsers() {
  let users = localStorage.getItem("activeUsers");
  users = users ? JSON.parse(users) : [];
  users = users.filter(u => Date.now() - u.time < 30000);
  let existing = users.find(u => u.name === username);
  if (existing) {
    existing.time = Date.now();
  } else {
    users.push({ name: username, time: Date.now() });
  }
  localStorage.setItem("activeUsers", JSON.stringify(users));
  document.getElementById("activeUsers").innerText = "Aktif kullanÄ±cÄ±: " + users.length;

  updateUserList();
}
setInterval(updateActiveUsers, 5000);
